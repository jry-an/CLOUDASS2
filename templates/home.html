{% extends 'base.html' %}
{% set school = universities %}
{% set rmitLat = school[0].lat %}
{% set rmitLng = school[0].lng %}

{% set melbLat = school[1].lat %}
{% set melbLng = school[1].lng %}

{% set vicLat = school[2].lat %}
{% set vicLng = school[2].lng %}




{% block head %}

{% endblock %}
{% block body %}

<div class="BookMark">

<h2>BookMark<h2>
<form method="post">
  <button name="payload" type="submit" value="Submit">See News Feed</button>
</form>
 <p>Messages received by this instance:</p>
  <ul>
    
  </ul>

  

  </div>


<div class="Consulation">
<h2>Consulation<h2>
<!-- first array is the row and second array is the column-->


  <nav>
    <ul>
      <li><a href="#">Bookmark1</a></li>
      <li><a href="#">Bookmark2</a></li>
      <li><a href="#">Bookmark3</a></li>
    </ul>
  </nav>
  </div>

<div class="CourseTrends">
<h2>CourseTrends<h2>

<button type="button" onclick="doHeatMap({{rows}})">Try it</button>
 <p id="demo"></p>
<script>
  function doHeatMap(rows){
  let heatmapData = [];
 
  for (let i = 0; i < rows.length; i++) {
      let f = rows[i].f;
      let coords = { lat: parseFloat(f[0].v), lng: parseFloat(f[1].v) };
      let latLng = new google.maps.LatLng(coords);
      heatmapData.push(latLng);
  }
        document.getElementById("demo").innerHTML = heatmapData;

    }

      var test = {testing:"{{rows}}"};
        document.getElementById("demo").innerHTML = test["testing"];
    }
    </script>
  </div>

  <div class="UniversityNews">
  <h2>University News<h2>
  <nav>
    <ul>
      <li><a href="#">Bookmark1</a></li>
      <li><a href="#">Bookmark2</a></li>
      <li><a href="#">Bookmark3</a></li>
    </ul>
  </nav>
  </div>


<div class="Content">
<div class="dropdown">
  <button onclick="myFunction()" class="dropbtn">Select University</button>
  <div id="myDropdown" class="dropdown-content">
    <button class="topbtn"  data-button='rmit'> {{ school[0].name }}</button>
    <button class="topbtn"  data-button='melbourne'> {{ school[1].name }}</button>
    <button class="topbtn"  data-button='victoria'> {{ school[2].name }}</button>
  </div>

</div>
</form>


<script>
function myFunction() {
  var a = document.getElementById("myDropdown").classList.toggle("show");
  if (a.style.display === "none") {
    a.style.display = "block";
    var d = "DA"
  } else {
    a.style.display = "none";
  }
}
function filterFunction() {
  var input, filter, ul, li, a, i;
  input = document.getElementById("SearchBar");
  filter = input.value.toUpperCase();
  div = document.getElementById("Content");
  a = div.getElementsByTagName("a");
  for (i = 0; i < a.length; i++) {
    txtValue = a[i].textContent || a[i].innerText;
    if (txtValue.toUpperCase().indexOf(filter) > -1) {
      a[i].style.display = "";
    } else {
      a[i].style.display = "none";
    }
  }
}

document.querySelectorAll('.topbtn').forEach(function(item) {
  let getBtnData = item.dataset.button;
  item.addEventListener('click', function(e) {
    document.querySelector('[data-type="' + getBtnData + '"]').classList.toggle('visibility')
  })

})

</script>





<script type="text/javascript">

    // Creates the google map
    function initMap() {
////////////////////////////////////////////////////////////////////////////////////////      
        // RMIT Google Map Display
        var myRMITLatLng = {lat: {{rmitLat}}, lng: {{ rmitLng }}};
        var RMITmap =  new google.maps.Map(document.getElementById('rmitMap'), {
            center: myRMITLatLng,
            zoom: 16
          });
          // Displays a red marker on the coordinates
          var RMITmarker = new google.maps.Marker({
          position: myRMITLatLng,
          map: RMITmap,
        });

////////////////////////////////////////////////////////////////////////////////////////      
        // Victoria University Google Map Display
        var myVicLatLng = {lat: {{vicLat}}, lng: {{ vicLng }}};
        var vicMap =  new google.maps.Map(document.getElementById('vicMap'), {
            center: myVicLatLng,
            zoom: 16
          });
         var vicmarker = new google.maps.Marker({
          position: myVicLatLng,
          map: vicMap,
        });

////////////////////////////////////////////////////////////////////////////////////////      
       // Melbourne University Google Map Display
       var myMelbLatLng = {lat: {{melbLat}}, lng: {{ melbLng }}};
       var melbMap =  new google.maps.Map(document.getElementById('melbMap'), {
            center: myMelbLatLng,
            zoom: 16
          });
          // Displays a red marker on the coordinates
          var melbMarker = new google.maps.Marker({
          position: myMelbLatLng,
          map: melbMap,
        });

////////////////////////////////////////////////////////////////////////////////////////      
    // Restaurant Markers around the universities
    {% for location in rows %}

    // Grab all coordinates
    var point = {lat: {{ location.latitude }}, lng: {{ location.longitude }}};

    // Restaurant markers around RMIT
    var RMITExtraMarker = new google.maps.Marker({
    position: point,
    map: RMITmap,
    icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
    });

    // Restaurant markers around Melbounre University
    var marker = new google.maps.Marker({
    position: point,
    map: melbMap,
    icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
    });

    // Restaurant markers around Victoria University
    var marker = new google.maps.Marker({
    position: point,
    map: vicMap,
    icon: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png',
    });


  {% endfor %}

}

</script>
    
<div id="contactus" data-type='victoria'>
  <center>
    <div id="vicMap" style="width:60%; height:500px;"></div>
      <p> Vic Content </p>
    <center>
</div> 


<div id="contactus" data-type='melbourne'>
  <center>
    <div id="melbMap" style="width:60%; height:500px;"></div>
      <p> melb Content </p>

    <center>
</div> 


<div id="contactus" data-type='rmit'>
  <center>
    <div id="rmitMap" style="width:60%; height:500px;"></div>
<button onclick="window.location.href = 'map.html';">Click Here</button>
  <p>This is an example sentence right here As you can see, once there's enough text in this box, the box will grow scroll bars... that's why we call it a scroll box! You could also place an image into the scroll box.As you can see, once there's enough text in this box, the box will grow scroll bars... that's why we call it a scroll box! You could also place an image into the scroll box.As you can see, once there's enough text in this box, the box will grow scroll bars... that's why we call it a scroll box! You could also place an image into the scroll box.As you can see, once there's enough text in this box, the box will grow scroll bars... that's why we call it a scroll box! You could also place an image into the scroll box.As you can see, once there's enough text in this box, the box will grow scroll bars... that's why we call it a scroll box! You could also place an image into the scroll box.As you can see, once there's enough text in this box, the box will grow scroll bars... that's why we call it a scroll box! You could also place an image into the scroll box.

    <center>
</div>



 {% endblock %}

